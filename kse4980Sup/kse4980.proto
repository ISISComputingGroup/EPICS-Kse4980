OutTerminator = "\r\n";
InTerminator = "\n";
ReplyTimeout = 1000;

errstr = ";:SYST:ERR?";

getIDN {
    out "*IDN?";
    in "%/(.{0,39})/";
    ExtraInput = Ignore;
}

reset { 
    out "*RST;:INIT;";
}

parseError {
    in "%(\$1ERRORID)d,%(\$1ERRORMSG)/(.{0,39})/";
}

fetchReadings {
    out ":FETC?";
    in "%e,%(\$1)e,%*d";
}

getFunc { 
    out ":FUNC:IMP?";
    in "%s";
}

setFunc {
    # chaka khan 
    out ":FUNC:IMP %s" $errstr;
    parseError;
}

setAutoRange { 
    out ":FUNC:IMP:RANG:AUTO %d" $errstr;
    parseError;
}

getAutoRange { 
    out ":FUNC:IMP:RANG:AUTO?";
    in "%d";
}

getManualImpRange {
    out ":FUNC:IMP:RANG?";
    in "%m";
}

setManualImpRange {
    out ":FUNC:IMP:RANG %m" $errstr;
    parseError;
}

setSignalFreq {
    out ":FREQ %e" $errstr;
    parseError;
}

getSignalFreq {
    out ":FREQ?";
    in "%e";
}

setSignalTypeAndLevel {
    out "%s,%(\$2)d" $errstr;
    parseError;
}

getSignalTypeAndLevel {
    out "%s?";
    in "%($2)d";
}

setMeasurementTimeAndAveragingFactor {
    out ":APER %s,%(\$2)d" $errstr;
    parseError;
}

getMeasurementTimeAndAveragingFactor {
    out ":APER?";
    in "%[A-Z],%(\$1.VAL)d";
}

